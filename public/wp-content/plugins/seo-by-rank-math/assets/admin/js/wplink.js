!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=62)}({4:function(e,t){e.exports=jQuery},62:function(e,t,n){"use strict";n.r(t);var i,r,l,a,s,o,c,p,u,d,h,f,w,k=n(4);function m(){return a?a.$('a[data-wplink-edit="true"]'):null}i=n.n(k).a,r=window.wpLinkL10n,l=window.wp,u=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,63}$/i,d=/^(https?|ftp):\/\/[A-Z0-9.-]+\.[A-Z]{2,63}[^ "]*$/i,h={},f={},w="ontouchend"in document,window.wpLink={timeToTriggerRiver:150,minRiverAJAXDuration:200,riverBottomThreshold:5,keySensitivity:100,lastSearch:"",textarea:"",modalOpen:!1,init:function(){h.wrap=i("#wp-link-wrap"),h.dialog=i("#wp-link"),h.backdrop=i("#wp-link-backdrop"),h.submit=i("#wp-link-submit"),h.close=i("#wp-link-close");var e=i('<div class="link-nofollow"><label><span> </span> <input type="checkbox" id="wp-link-nofollow"> '+r.relCheckbox+'</label></div><div class="link-sponsored"><label><span> </span> <input type="checkbox" id="wp-link-sponsored"> '+r.sponsoredCheckbox+"</label></div>"),t=i('<div class="wp-link-title-field"> <label><span>'+r.linkTitle+'</span> <input id="wp-link-title" type="text"></label></div>');e.insertAfter("#wp-link .link-target"),t.insertAfter("#wp-link .wp-link-text-field"),i("#wp-link .query-results").css("top","290px"),h.text=i("#wp-link-text"),h.url=i("#wp-link-url"),h.nonce=i("#_ajax_linking_nonce"),h.openInNewTab=i("#wp-link-target"),h.search=i("#wp-link-search"),h.nofollow=i("#wp-link-nofollow"),h.sponsored=i("#wp-link-sponsored"),h.title=i("#wp-link-title"),f.search=new p(i("#search-results")),f.recent=new p(i("#most-recent-results")),f.elements=h.dialog.find(".query-results"),h.queryNotice=i("#query-notice-message"),h.queryNoticeTextDefault=h.queryNotice.find(".query-notice-default"),h.queryNoticeTextHint=h.queryNotice.find(".query-notice-hint"),h.dialog.keydown(wpLink.keydown),h.dialog.keyup(wpLink.keyup),h.submit.click((function(e){e.preventDefault(),wpLink.update()})),h.close.add(h.backdrop).add("#wp-link-cancel button").click((function(e){e.preventDefault(),wpLink.close()})),f.elements.on("river-select",wpLink.updateFields),h.search.on("focus.wplink",(function(){h.queryNoticeTextDefault.hide(),h.queryNoticeTextHint.removeClass("screen-reader-text").show()})).on("blur.wplink",(function(){h.queryNoticeTextDefault.show(),h.queryNoticeTextHint.addClass("screen-reader-text").hide()})),h.search.on("keyup input",(function(){window.clearTimeout(s),s=window.setTimeout((function(){wpLink.searchInternalLinks()}),500)})),h.url.on("paste",(function(){setTimeout(wpLink.correctURL,0)})),h.url.on("blur",wpLink.correctURL)},correctURL:function(){var e=i.trim(h.url.val());e&&o!==e&&!/^(?:[a-z]+:|#|\?|\.|\/)/.test(e)&&(h.url.val("http://"+e),o=e)},open:function(e,t,n){var r,l=i(document.body);l.addClass("modal-open"),wpLink.modalOpen=!0,wpLink.range=null,e&&(window.wpActiveEditor=e),window.wpActiveEditor&&(this.textarea=i("#"+window.wpActiveEditor).get(0),void 0!==window.tinymce&&(l.append(h.backdrop,h.wrap),r=window.tinymce.get(window.wpActiveEditor),a=r&&!r.isHidden()?r:null),!wpLink.isMCE()&&document.selection&&(this.textarea.focus(),this.range=document.selection.createRange()),h.wrap.show(),h.backdrop.show(),wpLink.refresh(t,n),i(document).trigger("wplink-open",h.wrap))},isMCE:function(){return a&&!a.isHidden()},refresh:function(e,t){f.search.refresh(),f.recent.refresh(),wpLink.isMCE()?wpLink.mceRefresh(e,t):(h.wrap.hasClass("has-text-field")||h.wrap.addClass("has-text-field"),document.selection?document.selection.createRange():void 0!==this.textarea.selectionStart&&this.textarea.selectionStart!==this.textarea.selectionEnd&&(t=this.textarea.value.substring(this.textarea.selectionStart,this.textarea.selectionEnd)||t||""),h.text.val(t),wpLink.setDefaultValues()),w?h.url.focus().blur():window.setTimeout((function(){h.url[0].select(),h.url.focus()})),f.recent.ul.children().length||f.recent.ajax(),o=h.url.val().replace(/^http:\/\//,"")},hasSelectedText:function(e){var t,n,i,r=a.selection.getContent();if(/</.test(r)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(r.trim())||!~r.indexOf("href=")))return!1;if(e.length){if(!(n=e[0].childNodes)||!n.length)return!1;for(i=n.length-1;0<=i;i--)if(3!==(t=n[i]).nodeType&&!window.tinymce.dom.BookmarkManager.isBookmarkNode(t))return!1}return!0},mceRefresh:function(e,t){var n,l,s=m(),o=this.hasSelectedText(s);s.length?(n=s.text(),l=s.attr("href"),i.trim(n)||(n=t||""),e&&(d.test(e)||u.test(e))&&(l=e),"_wp_link_placeholder"!==l?(h.url.val(l),h.openInNewTab.prop("checked","_blank"===a.dom.getAttrib(s,"target")),h.nofollow.prop("checked",a.dom.getAttrib(s,"rel").includes("nofollow")),h.sponsored.prop("checked",a.dom.getAttrib(s,"rel").includes("sponsored")),h.title.val(a.dom.getAttrib(s,"title")),h.submit.val(r.update)):this.setDefaultValues(n),h.search.val(e&&e!==l?e:""),window.setTimeout((function(){wpLink.searchInternalLinks()}))):(n=a.selection.getContent({format:"text"})||t||"",this.setDefaultValues(n)),o?(h.text.val(n),h.wrap.addClass("has-text-field")):(h.text.val(""),h.wrap.removeClass("has-text-field"))},close:function(e){i(document.body).removeClass("modal-open"),wpLink.modalOpen=!1,"noReset"!==e&&(wpLink.isMCE()?(a.plugins.wplink&&a.plugins.wplink.close(),a.focus()):(wpLink.textarea.focus(),wpLink.range&&(wpLink.range.moveToBookmark(wpLink.range.getBookmark()),wpLink.range.select()))),h.backdrop.hide(),h.wrap.hide(),h.title.val(""),o=!1,i(document).trigger("wplink-close",h.wrap)},getAttrs:function(){wpLink.correctURL();var e=h.nofollow.prop("checked")?"nofollow":"";h.sponsored.prop("checked")&&(e=e?e+" sponsored":"sponsored");var t={href:i.trim(h.url.val()),target:h.openInNewTab.prop("checked")?"_blank":null,rel:e};return i.trim(h.title.val())&&(t.title=i.trim(h.title.val())),t},buildHtml:function(e){var t='<a href="'+e.href+'"';return e.target&&(t+=' target="'+e.target+'"'),e.rel&&(t+=' rel="'+e.rel+'"'),e.title&&(t+=' title="'+e.title+'"'),t+">"},update:function(){wpLink.isMCE()?wpLink.mceUpdate():wpLink.htmlUpdate()},htmlUpdate:function(){var e=wpLink.textarea;if(e){var t,n,a,s,o,c=wpLink.getAttrs(),p=document.createElement("a");if(p.href=c.href,"javascript:"!==p.protocol&&"data:"!==p.protocol||(c.href=""),c.href){t=wpLink.buildHtml(c);var u=h.text.val();document.selection&&wpLink.range?(e.focus(),wpLink.range.text=t+(u||wpLink.range.text)+"</a>",wpLink.range.moveToBookmark(wpLink.range.getBookmark()),wpLink.range.select(),wpLink.range=null):void 0!==e.selectionStart&&(a=e.selectionEnd,s=(n=e.selectionStart)+(t=t+(o=u||e.value.substring(n,a))+"</a>").length,n!==a||o||(s-=4),e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length),e.selectionStart=e.selectionEnd=s),wpLink.close(),e.focus(),i(e).trigger("change"),l.a11y.speak(r.linkInserted)}}},mceUpdate:function(){var e,t,n,s,o=wpLink.getAttrs(),c=document.createElement("a");if(c.href=o.href,"javascript:"!==c.protocol&&"data:"!==c.protocol||(o.href=""),!o.href)return a.execCommand("unlink"),void wpLink.close();e=a.$(m()),a.undoManager.transact((function(){e.length||(a.execCommand("mceInsertLink",!1,{href:"_wp_link_placeholder","data-wp-temp-link":1}),e=a.$('a[data-wp-temp-link="1"]').removeAttr("data-wp-temp-link"),n=i.trim(e.text())),e.length?(h.wrap.hasClass("has-text-field")&&((t=h.text.val())?e.text(t):n||e.text(o.href)),o["data-wplink-edit"]=null,o["data-mce-href"]=null,o.hasOwnProperty("rel")&&!o.rel&&(o.rel=null),e.attr(o)):a.execCommand("unlink")})),wpLink.close("noReset"),a.focus(),e.length&&((s=e.parent("#_mce_caret")).length&&s.before(e.removeAttr("data-mce-bogus")),a.selection.select(e[0]),a.selection.collapse(),a.plugins.wplink&&a.plugins.wplink.checkLink(e[0])),a.nodeChanged(),h.title.val(""),l.a11y.speak(r.linkInserted)},updateFields:function(e,t){h.url.val(t.children(".item-permalink").val()),h.wrap.hasClass("has-text-field")&&!h.text.val()&&h.text.val(t.children(".item-title").text())},getUrlFromSelection:function(e){return e||(this.isMCE()?e=a.selection.getContent({format:"text"}):document.selection&&wpLink.range?e=wpLink.range.text:void 0!==this.textarea.selectionStart&&(e=this.textarea.value.substring(this.textarea.selectionStart,this.textarea.selectionEnd))),(e=i.trim(e))&&u.test(e)?"mailto:"+e:e&&d.test(e)?e.replace(/&amp;|&#0?38;/gi,"&"):""},setDefaultValues:function(e){h.url.val(this.getUrlFromSelection(e)),h.search.val(""),wpLink.searchInternalLinks(),h.submit.val(r.save)},searchInternalLinks:function(){var e,t=h.search.val()||"";if(2<t.length){if(f.recent.hide(),f.search.show(),wpLink.lastSearch===t)return;wpLink.lastSearch=t,e=h.search.parent().find(".spinner").addClass("is-active"),f.search.change(t),f.search.ajax((function(){e.removeClass("is-active")}))}else f.search.hide(),f.recent.show()},next:function(){f.search.next(),f.recent.next()},prev:function(){f.search.prev(),f.recent.prev()},keydown:function(e){var t;if(27===e.keyCode?(wpLink.close(),e.stopImmediatePropagation()):9===e.keyCode&&("wp-link-submit"!==(t=e.target.id)||e.shiftKey?"wp-link-close"===t&&e.shiftKey&&(h.submit.focus(),e.preventDefault()):(h.close.focus(),e.preventDefault())),!(e.shiftKey||38!==e.keyCode&&40!==e.keyCode||document.activeElement&&("link-title-field"===document.activeElement.id||"url-field"===document.activeElement.id))){var n=38===e.keyCode?"prev":"next";clearInterval(wpLink.keyInterval),wpLink[n](),wpLink.keyInterval=setInterval(wpLink[n],wpLink.keySensitivity),e.preventDefault()}},keyup:function(e){38!==e.keyCode&&40!==e.keyCode||(clearInterval(wpLink.keyInterval),e.preventDefault())},delayedCallback:function(e,t){var n,i,r,l;return t?(setTimeout((function(){if(i)return e.apply(l,r);n=!0}),t),function(){if(n)return e.apply(this,arguments);r=arguments,l=this,i=!0}):e}},p=function(e,t){var n=this;this.element=e,this.ul=e.children("ul"),this.contentHeight=e.children("#link-selector-height"),this.waiting=e.find(".river-waiting"),this.change(t),this.refresh(),i("#wp-link .query-results, #wp-link #link-selector").scroll((function(){n.maybeLoad()})),e.on("click","li",(function(e){n.select(i(this),e)}))},i.extend(p.prototype,{refresh:function(){this.deselect(),this.visible=this.element.is(":visible")},show:function(){this.visible||(this.deselect(),this.element.show(),this.visible=!0)},hide:function(){this.element.hide(),this.visible=!1},select:function(e,t){if(!e.hasClass("unselectable")&&e!==this.selected){this.deselect(),this.selected=e.addClass("selected");var n=e.outerHeight(),i=this.element.height(),r=e.position().top,l=this.element.scrollTop();r<0?this.element.scrollTop(l+r):i<r+n&&this.element.scrollTop(l+r-i+n),this.element.trigger("river-select",[e,t,this])}},deselect:function(){this.selected&&this.selected.removeClass("selected"),this.selected=!1},prev:function(){var e;this.visible&&this.selected&&(e=this.selected.prev("li")).length&&this.select(e)},next:function(){if(this.visible){var e=this.selected?this.selected.next("li"):i("li:not(.unselectable):first",this.element);e.length&&this.select(e)}},ajax:function(e){var t=this,n=1===this.query.page?0:wpLink.minRiverAJAXDuration,i=wpLink.delayedCallback((function(n,i){t.process(n,i),e&&e(n,i)}),n);this.query.ajax(i)},change:function(e){this.query&&this._search===e||(this._search=e,this.query=new c(e),this.element.scrollTop(0))},process:function(e,t){var n="",l=!0,a="",s=1===t.page;e?i.each(e,(function(){a=l?"alternate":"",n+=(a+=this.title?"":" no-title")?'<li class="'+a+'">':"<li>",n+='<input type="hidden" class="item-permalink" value="'+this.permalink+'" />',n+='<span class="item-title">',n+=this.title?this.title:r.noTitle,n+='</span><span class="item-info">'+this.info+"</span></li>",l=!l})):s&&(n+='<li class="unselectable no-matches-found"><span class="item-title"><em>'+r.noMatchesFound+"</em></span></li>"),this.ul[s?"html":"append"](n)},maybeLoad:function(){var e=this,t=this.element,n=t.scrollTop()+t.height();this.query.ready()&&n>=this.contentHeight.height()-wpLink.riverBottomThreshold&&setTimeout((function(){var n=t.scrollTop(),i=n+t.height();e.query.ready()&&i>=e.contentHeight.height()-wpLink.riverBottomThreshold&&(e.waiting.addClass("is-active"),t.scrollTop(n+e.waiting.outerHeight()),e.ajax((function(){e.waiting.removeClass("is-active")})))}),wpLink.timeToTriggerRiver)}}),i.extend((c=function(e){this.page=1,this.allLoaded=!1,this.querying=!1,this.search=e}).prototype,{ready:function(){return!(this.querying||this.allLoaded)},ajax:function(e){var t=this,n={action:"wp-link-ajax",page:this.page,_ajax_linking_nonce:h.nonce.val()};this.search&&(n.search=this.search),this.querying=!0,i.post(window.ajaxurl,n,(function(i){t.page++,t.querying=!1,t.allLoaded=!i,e(i,n)}),"json")}}),i(document).ready(wpLink.init)}});