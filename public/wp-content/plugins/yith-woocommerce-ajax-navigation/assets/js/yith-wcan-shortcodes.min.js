"use strict";function YITH_WCAN_Filter(e){const t=this;return t.xhr=null,t.doingAjax=!1,t.initialized=!1,t.originalSearch=!1,t._init=function(){const i=e("head").html(),n=document.title,l=t.searchAlternativeUrl(i);l&&!t.doingAjax&&!t.initialized&&!yith_wcan_shortcodes.ajax_filters&&t.pushUrlToHistory(l,n),t.originalSearch=location.search,t.initialized=!0},t.doFilter=function(i,n,l){let o,a=e(n||"body");if(a&&t.block(a),o=t.buildUrl(i),yith_wcan_shortcodes.ajax_filters)return t.doingAjax=!0,t._doAjax(o).done((function(e){o=t.searchAlternativeUrl(e,o),t._beforeFilter(e,i),t.refreshFragments(n,l,e),t.pushUrlToHistory(o,e.pageTitle),a&&t.unblock(a),t._afterFilter(e,i),t.doingAjax=!1}));window.location=o},t._beforeFilter=function(t,i){e(document).trigger("yith-wcan-ajax-loading",[t,i])},t._afterFilter=function(t,i){e(".woocommerce-ordering").on("change","select.orderby",(function(){e(this).closest("form").submit()})),e(window).trigger("scroll"),e(document).trigger("yith-wcan-ajax-filtered",[t,i]).trigger("yith_wcwl_reload_fragments")},t.buildUrl=function(i){let n=yith_wcan_shortcodes.query_param,l={},o=window.location,a=yith_wcan_shortcodes.base_url?yith_wcan_shortcodes.base_url:o?.origin+o?.pathname,s="";const r="object"==typeof i&&Object.keys(i).length;if(yith_wcan_shortcodes.session_param&&(a=a.replace(new RegExp("/"+yith_wcan_shortcodes.session_param+"/[^/]*/"),"")),r&&(l[n]=1),t.originalSearch){const i=t.originalSearch.replace("?","").split("&").reduce(((e,i)=>{const n=i.split("=");if(2===n.length){if(t.isFilterParam(n[0]))return e;e[n[0]]=n[1]}return e}),{});l=e.extend(l,i)}return r&&(l=e.extend(l,i)),s=Object.keys(l).reduce((function(e,t){const i=l[t];return i&&t?e+=encodeURIComponent(t)+"="+encodeURIComponent(i)+"&":e}),"?").replace(/&$/g,"").replace(/%2B/g,"+").replace(/%2C/g,","),s.length>1&&(a+=s),a},t.searchAlternativeUrl=function(e,t=""){let i,n=t;return-1===e.indexOf("yith_wcan:sharing_url")||(i=e.match(/<meta name="yith_wcan:sharing_url" content="([^"]*)">/),n=1 in i?i[1]:n),n},t.pushUrlToHistory=function(e,t){yith_wcan_shortcodes.change_browser_url&&!navigator.userAgent.match(/msie/i)&&window.history.pushState({pageTitle:t},"",e)},t.refreshFragments=function(t,i,n){const l=document.createElement("html"),o=e(l);if(l.innerHTML=n,t){let n,l=e(i),a=e(t);l.length&&(n=o.find(i),n.length&&l.replaceWith(n.first())),a.length&&(n=o.find(t),n.length&&a.replaceWith(n.first()))}else{const t=e(yith_wcan_shortcodes.content);t.length?t.replaceWith(o.find(yith_wcan_shortcodes.content)):e("body").replaceWith(o.find("body"))}e(document).trigger("yith_wcan_init_shortcodes")},t._doAjax=function(i,n){return t.xhr&&t.xhr.abort(),n=e.extend({url:i},n),t.xhr=e.ajax(n),t.xhr},t.block=function(t){if(void 0===e.fn.block)return;let i="#fff center center no-repeat";yith_wcan_shortcodes?.loader&&(i=`url('${yith_wcan_shortcodes.loader}') ${i}`),t.block({message:null,overlayCSS:{background:i,opacity:.7}})},t.unblock=function(t){void 0!==e.fn.unblock&&t.unblock()},t.isFilterParam=function(e){return-1!==["rating_filter","min_price","max_price","onsale_filter","instock_filter","orderby","product-page",yith_wcan_shortcodes.query_param].concat(yith_wcan_shortcodes.supported_taxonomies.map((e=>e.replace("pa_","filter_")))).indexOf(e)||(-1!==e.indexOf("filter_")||-1!==e.indexOf("query_type_"))},t._init(),t}function YITH_WCAN_Preset(e,t){const i=this;return i.preset="#"+e.attr("id"),i.$preset=e,i.target=i.$preset.data("target"),i.$target=!!i.target&&t(i.target),i.$filters=!1,i.$filterButtons=!1,i.modalElements={},i.activeFilters=!1,i.isMobile=!1,i.sliderTimeout=!1,i.originalFilters=null,i.dirty=!1,i._init=function(){i._regiterStatus(),i._initFilterButton(),i._initResponsive(),i._initFilters(),i._initActions(),i.$preset.data("preset",i).addClass("enhanced")},i._initFilters=function(){i.getFilters().each((function(){const e=t(this);i._initFilter(e)})),i.maybeShowClearAllFilters()},i._initFilterButton=function(){i.$filterButtons=i.$preset.find(".apply-filters"),i.$filterButtons.length&&i.$filterButtons.on("click",(e=>{e.preventDefault(),i.filter()})).hide()},i._initActions=function(){i.$preset.find("form").on("submit",(e=>{e.preventDefault()}))},i._initResponsive=function(){if(!yith_wcan_shortcodes.modal_on_mobile)return;const e=window.matchMedia(`(max-width: ${yith_wcan_shortcodes.mobile_media_query}px)`);t(window).on("resize",(function(){const t=!!e.matches;t!==i.isMobile&&(i.isMobile=t,i._afterLayoutChange())})).resize()},i._initFilter=function(e){const n=function(e){const n=t(this),l=n.closest(".yith-wcan-filter"),o=!!l.length&&"yes"===l.data("multiple"),a=n.closest(".filter-item"),s=a.length?l.find(".filter-item").not(a):[];if(a.is(".disabled")&&!a.is(".active"))return e.preventDefault(),!1;e.preventDefault(),s.length&&!o&&s.removeClass("active"),a.length&&a.toggleClass("active"),i.activeFilters=!1,i.maybeFilter(),i.maybeToggleClearAllFilters(),i.maybeToggleClearFilter(l)};e.find(".filter-item").not(".checkbox").not(".radio").on("click","a",(function(e){const i=t(this).closest(".filter-item");if(!t(e?.delegateTarget).is(i))return!1;n.call(this,e)})),e.find(":input").on("change",(function(e){const i=t(this),l=i.closest(".filter-item");if(l.is(".disabled")&&!l.is(".active"))return i.prop("checked",!1),!1;n.call(this,e)})),e.find("label > a").on("click",(function(e){const i=t(this),n=i.closest(".filter-item");if(e.preventDefault(),n.is(".disabled")&&!n.is(".active"))return!1;const l=i.parent().find(":input");(l.is('[type="radio"]')||l.is('[type="checkbox"]'))&&l.prop("checked",!l.prop("checked")),l.change()})),i._initTooltip(e),i._initPriceSlider(e),i._initDropdown(e),i._initCollapsable(e),i.maybeShowClearFilter(e),i.$preset?.hasClass("custom-style")&&i._initCustomInput(e)},i._initTooltip=function(e,i){e.find("[data-title]").each((function(){const e=t(this);!e.hasClass("tooltip-added")&&e.data("title")&&(e.on("mouseenter",(function(){let e=t(this),n=null,l=e.outerWidth(),o=0,a=0;if(!i||"top"!==i&&"right"!==i){const t=e.closest(".filter-item");i=t.hasClass("color")||t.hasClass("label")?"top":"right"}n=t("<span>",{class:"yith-wcan-tooltip",html:e.data("title")}),e.append(n),a=n.outerWidth()+6,n.outerWidth(a),o="top"===i?(l-a)/2:l+15,n.css({left:o.toFixed(0)+"px"}).fadeIn(200),e.addClass("with-tooltip")})).on("mouseleave",(function(){const e=t(this);e.find(".yith-wcan-tooltip").fadeOut(200,(function(){e.removeClass("with-tooltip").find(".yith-wcan-tooltip").remove()}))})),e.addClass("tooltip-added"))}))},i._initDropdown=function(e){const i=e.find("select.filter-dropdown");i.length&&(i.hasClass("select2-hidden-accessible")&&void 0!==t.fn.selectWoo&&i.selectWoo("destroy"),new YITH_WCAN_Dropdown(i,t,{paginate:!0,perPage:yith_wcan_shortcodes.terms_per_page}))},i._initPriceSlider=function(e){if(!e.hasClass("filter-price-slider"))return;const t=e.find(".price-slider"),n=t.find(".price-slider-min"),l=t.find(".price-slider-max"),o=parseFloat(t.data("min")),a=parseFloat(t.data("max")),s=parseFloat(n.val()),r=parseFloat(l.val()),c=parseFloat(t.data("step"));e.find(".price-slider-ui").ionRangeSlider({skin:"round",type:"double",min:o,max:a,step:c,from:s,to:r,min_interval:c,values_separator:" - ",prettify:e=>i.formatPrice(e),onChange:e=>{n.val(e.from),l.val(e.to)},onFinish:e=>{i.sliderTimeout&&clearTimeout(i.sliderTimeout),i.sliderTimeout=setTimeout((function(){i.maybeFilter()}),200)}})},i._initCollapsable=function(e){i._initTitleCollapsable(e),i._initHierarchyCollapsable(e)},i._initTitleCollapsable=function(e){const t=e.find(".collapsable");t.length&&i._initToggle(t,t,e.find(".filter-content"))},i._initHierarchyCollapsable=function(e){const n=e.find(".hierarchy-collapsable");if(!n.length)return;const l=e.find(".active");l.length&&(l.parents(".hierarchy-collapsable").removeClass("closed").addClass("opened"),l.hasClass("hierarchy-collapsable")&&yith_wcan_shortcodes.show_current_children&&l.removeClass("closed").addClass("opened")),n.each((function(){const e=t(this),n=t("<span/>",{class:"toggle-handle"});n.appendTo(e),i._initToggle(n,e,e.children("ul.filter-items"))}))},i._initToggle=function(e,t,i){t.hasClass("closed")&&i.hide(),e.off("click").on("click",(function(e){e.stopPropagation(),t.toggleClass("opened").toggleClass("closed"),i.slideToggle()}))},i._initCustomInput=function(e){e.find(":input").each((function(){let e,i=t(this),n=i.attr("type"),l=`${n}button`;"checkbox"!==n&&"radio"!==n||i.closest(`.${l}`).length||(i.is(":checked")&&(l+=" checked"),e=t("<span/>",{class:l}),i.wrap(e).on("change",(function(){const e=t(this);e.prop("checked")?e.parent().addClass("checked"):e.parent().removeClass("checked")})))}))},i._regiterStatus=function(){i.originalFilters=i.getFiltersProperties()},i._afterLayoutChange=function(){i.isMobile?(i.$preset.addClass("filters-modal").attr("role","dialog").attr("tabindex","-1").hide(),i._addCloseModalButton(),i._addApplyFiltersModalButton(),i._switchToCollapsables(),i.$filterButtons?.hide()):(i.$preset.removeClass("filters-modal").removeClass("open").removeAttr("role").removeAttr("tabindex").show(),t("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open"),i._removeCloseModalButton(),i._removeApplyFiltersModalButton(),i._switchBackCollapsables(),i.$filterButtons?.show())},i._addCloseModalButton=function(){const e=t("<a/>",{class:"close-button",html:"&times;","data-dismiss":"modal","aria-label":yith_wcan_shortcodes.labels.close});e.prependTo(i.$preset).on("click",i.closeModal),i.modalElements.closeButton=e},i._removeCloseModalButton=function(){i.modalElements?.closeButton?.remove()},i._addApplyFiltersModalButton=function(){const e=t("<button/>",{class:"apply-filters main-modal-button",html:yith_wcan_shortcodes.labels.show_results,"data-dismiss":"modal"});e.appendTo(i.$preset).on("click",(()=>{i.filter(),i.closeModal()})),i.modalElements.applyFiltersButton=e},i._removeApplyFiltersModalButton=function(){i.modalElements?.applyFiltersButton?.remove()},i._switchToCollapsables=function(){i.getFilters().each((function(){const e=t(this),n=e.find(".filter-title");n.length&&!n.hasClass("collapsable")&&(n.addClass("collapsable").data("disable-collapse",!0),i._initTitleCollapsable(e))}))},i._switchBackCollapsables=function(){i.getFilters().each((function(){const e=t(this),i=e.find(".filter-title");i.length&&i.hasClass("collapsable")&&i.data("disable-collapse")&&(i.removeClass("collapsable").removeData("disable-collapse",!0).off("click"),e.find(".filter-content").show())}))},i._closeAllCollapsables=function(){i.$filters.not(".no-title").not(((e,n)=>i.isFilterActive(t(n)))).find(".filter-content").hide().end().find(".filter-title").addClass("closed").removeClass("opened")},i.maybeRegisterStatusChange=function(){const e=i.getFiltersProperties(),t=JSON.stringify(e),n=JSON.stringify(i.originalFilters);i.dirty=t!==n},i.maybeFilter=function(){i.maybeRegisterStatusChange(),yith_wcan_shortcodes.instant_filters&&!i.isMobile?i.filter():yith_wcan_shortcodes.instant_filters||i.isMobile?i.isMobile&&i.dirty&&(i.$preset.addClass("with-filter-button"),i.modalElements.applyFiltersButton?.show()):i.dirty?i.$filterButtons?.show():i.$filterButtons?.hide()},i.filter=function(){window?.product_filter?.doFilter(i.getFiltersProperties(),i.target,i.preset).done((()=>{let e=t(i.preset);if(!i.isMobile&&e.length&&yith_wcan_shortcodes.scroll_top){let i=e.offset().top;if(yith_wcan_shortcodes.scroll_target){const e=t(yith_wcan_shortcodes.scroll_target);i=e.length?e.offset().top:i}t("body, html").animate({scrollTop:i-100})}i.originalFilters=i.getFiltersProperties(),i.dirty=!1})),i.isMobile&&(i.$preset.removeClass("with-filter-button"),i.modalElements.applyFiltersButton?.hide())},i.getFilters=function(){return!1===i.$filters&&(i.$filters=i.$preset.find(".yith-wcan-filter")),i.$filters},i.getActiveFilters=function(){return!1===i.activeFilters&&(i.activeFilters=i.getFiltersProperties()),i.activeFilters},i.isAnyFilterActive=function(){return!!Object.keys(i.getActiveFilters()).length},i.isFilterActive=function(e){let t,n;switch(e.data("filter-type")){case"tax":const i=e.find(".filter-dropdown");if(i.length){const e=i.val();t="object"==typeof e?!!e?.length:!!e;break}case"price_range":case"stock_sale":t=e.find(".filter-item").filter(".active").length;break;case"review":t=!!e.find("select").val();break;case"price_slider":const n=parseFloat(e.find(".price-slider").data("min")),l=parseFloat(e.find(".price-slider").data("max")),o=parseFloat(e.find(".price-slider-min").val()),a=parseFloat(e.find(".price-slider-max").val());t=o>n||a<l;break;case"orderby":t="menu_order"!==e.find(".filter-order-by").val();break;default:t=!1}return n=e.triggerHandler("yith_wcan_is_filter_active",t,i),t=void 0!==n?n:t,t},i.getFilterProperties=function(e){let n,l,o={};switch(e.data("filter-type")){case"tax":let i=e.find(".filter-dropdown"),n=[],a=e.data("taxonomy"),s=0===a.indexOf("filter"),r="yes"===e.data("multiple"),c=e.data("relation");if(i.length?r?n=i.val():n.push(i.val()):(l=e.find(".filter-item").filter(".active").children("a, label"),n=l.get().reduce((function(e,i){let n;return n=(i=t(i)).is("label")?i.find(":input").val():i.data("term-slug"),n?(e.push(n),e):e}),n)),r){const e=s||"and"!==c?",":"+";o[a]=n.join(e)}else o[a]=n.pop();s&&(o[a.replace("filter_","query_type_")]=c);break;case"review":o.rating_filter=e.find("select").val();break;case"price_range":l=e.find(".filter-item").filter(".active").first().children("a"),o.min_price=parseFloat(l.data("range-min")),o.max_price=parseFloat(l.data("range-max"));break;case"price_slider":o.min_price=parseFloat(e.find(".price-slider-min").val()),o.max_price=parseFloat(e.find(".price-slider-max").val());break;case"stock_sale":e.find(".filter-on-sale").is(".active")&&(o.onsale_filter=1),e.find(".filter-in-stock").is(".active")&&(o.instock_filter=1);break;case"orderby":o.orderby=e.find(".filter-order-by").val()}return n=e.triggerHandler("yith_wcan_filter_properties",o,i),o=void 0!==n?n:o,o},i.getFiltersProperties=function(){let e={};return i.getFilters().each((function(){const n=t(this);if(i.isFilterActive(n)){const t=i.getFilterProperties(n);e=i.mergeProperties(e,t,n)}})),e},i.getFiltersByProperties=function(e){return i.getFilters().filter((function(){const n=t(this);if(i.isFilterActive(n)){let t=i.getFilterProperties(n),l=!1;for(const i in e)if(void 0!==t[i]){l=!0;break}return l}return!1}))},i.maybeToggleClearFilter=function(e){i.isFilterActive(e)?i.maybeShowClearFilter(e):i.maybeHideClearFilter(e)},i.maybeToggleClearAllFilters=function(){i.isAnyFilterActive()?i.maybeShowClearAllFilters():i.maybeHideClearAllFilters()},i.maybeShowClearFilter=function(e){i.isFilterActive(e)&&yith_wcan_shortcodes.show_clear_filter&&(e.find(".clear-selection").remove(),t("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_selection,role:"button"}).prependTo(e.find(".filter-content")).on("click",(function(t){t.preventDefault(),i.deactivateFilter(e,!1,yith_wcan_shortcodes.instant_filters),i.maybeHideClearFilter(e),yith_wcan_shortcodes.instant_filters&&i.closeModal()})))},i.maybeShowClearAllFilters=function(){i.isAnyFilterActive()&&i.isMobile&&(i.$preset.find(".clear-selection").remove(),t("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_all_selections,role:"button"}).prependTo(i.$preset.find(".filters-container")).on("click",(function(e){e.preventDefault(),i.deactivateAllFilters(yith_wcan_shortcodes.instant_filters),i.maybeHideClearAllFilters(),yith_wcan_shortcodes.instant_filters&&i.closeModal()})))},i.maybeHideClearFilter=function(e){!i.isFilterActive(e)&&yith_wcan_shortcodes.show_clear_filter&&e.find(".clear-selection").remove()},i.maybeHideClearAllFilters=function(){i.isAnyFilterActive()||i.$preset.find(".filters-container").children(".clear-selection").remove()},i.deactivateFilter=function(e,n,l){const o=e.data("filter-type"),a=e.find(".filter-item"),s=a.filter(".active");switch(o){case"tax":const i=e.find(".filter-dropdown"),l=e.data("taxonomy");i.length?(n?i.find("option").each((function(){const e=t(this);e.val()===n[l]&&e.prop("selected",!1)})):i.find("option").prop("selected",!1),i.change()):n?s.each((function(){let e,i=t(this),o=i.children("label"),a=i.children("a");e=o.length?o.find(":input").val():a.data("term-slug"),e===n[l]&&(i.children("label").children("a").click(),i.removeClass("active"))})):(s.children("label").children("a").click(),s.removeClass("active"));break;case"price_slider":const o=e.find(".price-slider");e.find(".price-slider-min").val(o.data("min")),e.find(".price-slider-max").val(o.data("max")).change();break;case"orderby":e.find("select").val("menu_order");break;case"stock_sale":n?(n?.instock_filter&&e.find(".filter-in-stock").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active"),n?.onsale_filter&&e.find(".filter-on-sale").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active")):(e.find(".filter-in-stock").find(":input").prop("checked",!1).change(),e.find(".filter-on-sale").find(":input").prop("checked",!1).change(),a.removeClass("active"));break;case"review":e.find(".filter-dropdown").val("").change();break;default:a.removeClass("active")}i.activeFilters=!1,l&&i.filter()},i.deactivateAllFilters=function(e){i.getFilters().each((function(){const e=t(this);i.deactivateFilter(e)})),i.activeFilters=!1,e&&i.filter()},i.deactivateFilterByProperties=function(e,n){const l=i.getFiltersByProperties(e);l.length&&l.each((function(){const l=t(this);i.deactivateFilter(l,e,n)}))},i.openModal=function(){i.isMobile&&(i._closeAllCollapsables(),t("body").css("overflow","hidden").addClass("yith-wcan-preset-modal-open"),i.$preset.show(),setTimeout((()=>{i.$preset.addClass("open")}),100))},i.closeModal=function(){i.isMobile&&(i.$preset.removeClass("open"),setTimeout((()=>{i.$preset.hide(),t("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open")}),300))},i.formatPrice=function(e){return"undefined"!=typeof accounting&&(e=accounting.formatMoney(e,{symbol:yith_wcan_shortcodes.currency_format.symbol,decimal:yith_wcan_shortcodes.currency_format.decimal,thousand:yith_wcan_shortcodes.currency_format.thousand,precision:0,format:yith_wcan_shortcodes.currency_format.format})),e},i.mergeProperties=function(e,i,n){for(const t in i)if(i.hasOwnProperty(t)&&e[t]){switch(t){case"rating_filter":case"min_price":case"max_price":case"onsale_filter":case"instock_filter":case"orderby":e[t]=i[t];break;default:if(0===t.indexOf("query_type_"))e[t]=i[t];else{const n=0===t.indexOf("filter_"),l=n?",":"+";let o=e[t].replace(",",l)+l+i[t].replace(",",l);if(o=o.split(l).filter(((e,t,i)=>i.indexOf(e)===t)).join(l),e[t]=o,n){const n=t.replace("filter_","query_type_");e[n]="and",i[n]="and"}}}delete i[t]}return t.extend(e,i),e},i._init(),i}function YITH_WCAN_Filter_Labels(e,t){const i=this;return i.$label_set=e,i.$labels=!1,i._init=function(){i._initLabels(),i.$label_set.data("filter_labels",i).addClass("enhanced")},i._initLabels=function(){i.getLabels().each((function(){const e=t(this);i._initLabel(e)}))},i._initLabel=function(e){e.on("click",(()=>i.disableLabel(e)))},i.getLabels=function(){return!1===i.$labels&&(i.$labels=i.$label_set.find(".active-filter-label")),i.$labels},i.disableLabel=function(e){const i=e.data("filters");t(".yith-wcan-filters").each((function(){t(this).data("preset").deactivateFilterByProperties(i,!0)}))},i._init(),i}function YITH_WCAN_Reset_Button(e,t){const i=this;return i.$reset=e,i._init=function(){i.$reset.on("click",(function(e){e.preventDefault(),t(".yith-wcan-filters").each((function(){t(this).data("preset").deactivateAllFilters(!0)}))})),i.$reset.data("reset",i).addClass("enhanced")},i._init(),i}function YITH_WCAN_Modal_Opener(e,t){const i=this;return i.$button=e,i.preset=null,i.$preset=null,i.isMobile,i._init=function(){i._initPreset(),i._initResponsive(),i._initActions(),i.$button.data("modalOpener",i).addClass("enhanced")},i._initPreset=function(){let e,n=i.$button.data("target");e=t(n?`#${n}`:".yith-wcan-filters"),e.length&&(i.$preset=e.first(),i.preset=i.$preset.data("preset"))},i._initResponsive=function(){if(!yith_wcan_shortcodes.modal_on_mobile)return void i.$button.hide();const e=window.matchMedia(`(max-width: ${yith_wcan_shortcodes.mobile_media_query}px)`);t(window).on("resize",(function(){const t=!!e.matches;t!==i.isMobile&&(i.isMobile=t,i._afterLayoutChange())})).resize()},i._initActions=function(){i.$preset?.length&&i.$button.on("click",(function(e){e.preventDefault(),i.preset.openModal()}))},i._afterLayoutChange=function(){i.isMobile?i.$button.show():i.$button.hide()},i._init(),i}function YITH_WCAN_Dropdown(e,t,i){const n=this;return n.$origialSelect=e,n.$_main=null,n.$_label=null,n.$_dropdown=null,n.$_search=null,n.$_showMore=null,n.$_items=null,n.currentPage=1,n.options={},n._init=function(){if(!n.$origialSelect.is("select"))return;const e=n.$origialSelect.data("per_page"),l=n.$origialSelect.data("order"),o={showSearch:n.$origialSelect.data("show_search"),paginate:n.$origialSelect.data("paginate"),perPage:e||10,order:l||"ASC",getElements:null,labels:{emptyLabel:yith_wcan_shortcodes.labels.empty_option,searchPlaceholder:yith_wcan_shortcodes.labels.search_placeholder,noItemsFound:yith_wcan_shortcodes.labels.no_items,showMore:yith_wcan_shortcodes.labels.show_more}};n.options=t.extend(o,i),n._hideSelect(),n._initTemplate(),n._initActions(),n.$origialSelect.data("dropdown",n).addClass("enhanced")},n._hideSelect=function(){n.$origialSelect.hide()},n._initTemplate=function(){const e=t("<div/>",{class:"yith-wcan-dropdown closed"}),i=t("<div/>",{class:"dropdown-label",html:n.getLabel()}),l=t("<div>",{class:"dropdown-wrapper"}),o=t("<ul/>",{class:"matching-items filter-items"});l.append(o),e.append(i).append(l),n.options.showSearch&&n._initSearchTemplate(l),n.options.paginate&&n._initShowMoreTemplate(l),n.$origialSelect.after(e),n.$_main=e,n.$_label=i,n.$_dropdown=l,n.$_items=o},n._initSearchTemplate=function(e){const i=t("<div/>",{class:"search-field-container"}),l=t("<input/>",{name:"s",class:"search-field",type:"search",placeholder:n.options.labels.searchPlaceholder});i.append(l).prependTo(e),n.$_search=l},n._initShowMoreTemplate=function(e){const i=t("<a/>",{class:"show-more",text:n.options.labels.showMore.replace("%d",n.options.perPage)});i.on("click",n.loadNextPage).hide(),e.append(i),n.$_showMore=i},n._initActions=function(){n.$_main.on("click",(e=>{e.stopPropagation(),n.toggleDropdown()})),n.$_dropdown.on("click",(e=>{e.stopPropagation()})),n.$_search?.on("keyup search",(()=>{n._populateItems()})),n.$_items.on("change",":input",(function(){let e=t(this).closest("li"),i=e.data("value"),l=!1;if(e.hasClass("disabled")&&!n.isValueSelected(i))return!1;e.toggleClass("active"),l=e.hasClass("active"),n._changeItemStatus(i,l)})),n.$_items.on("click","li:not(.checkbox) a",(function(e){let i=t(this).closest("li"),l=i.data("value"),o=!1;if(e.preventDefault(),i.hasClass("disabled")&&!n.isValueSelected(l))return!1;i.toggleClass("active"),o=i.hasClass("active"),o&&i.siblings().removeClass("active"),n._changeItemStatus(l,o)})),n.$_items.on("click","label > a",(function(e){const i=t(this).parent().find(":input");e.preventDefault(),(i.is('[type="radio"]')||i.is('[type="checkbox"]'))&&i.prop("checked",!i.prop("checked")),i.change()})),n.$origialSelect.on("change",((e,i)=>{i||(n.$_items.find("li").each((function(){const e=t(this).data("value");n.isValueSelected(e)?n._selectItem(e):n._deselectItem(e)})),n.updateLabel())})),t(document).on("click",n.closeDropdown)},n.openDropdown=function(){n.$_main.addClass("open").removeClass("closed"),n._afterDropdownOpen()},n.closeDropdown=function(){n.$_main.removeClass("open").addClass("closed")},n._closeOtherDropdowns=function(){t(document).find("select.enhanced").filter((function(e,i){const l=t(i);return!!l.data("dropdown")&&!l.is(n.$origialSelect)})).each((function(){t(this).data("dropdown").closeDropdown()}))},n.toggleDropdown=function(){n.$_main.toggleClass("open").toggleClass("closed"),n.$_main.hasClass("open")&&n._afterDropdownOpen()},n._afterDropdownOpen=function(){n._closeOtherDropdowns(),n.$_search?.length&&n.$_search.val(""),n._populateItems()},n.getMatchingElements=function(e,i){let l,o=[],a=n.getOptions();return l=new Promise((l=>{a.each((function(){const i=t(this),n=i.val(),l=i.html(),a=new RegExp(".*"+e+".*","i");(!e||a.test(n)||a.test(l))&&o.push({value:n,label:l})})),n.options.getElements?n.options.getElements(e).then((e=>{e&&(e=e.reduce(((e,t,i)=>(e.push({label:i,value:t}),e)),[]),o=t.extend(o,e)),l(n._formatItems(o,i))})):l(n._formatItems(o,i))})),l},n._formatItems=function(e,t){let i=[],l=!1;return e.filter((e=>-1===i.indexOf(e.value)&&(i.push(e.value),!0))).sort(((e,t)=>{const i="ASC"===n.options.order?1:-1;return e.value<t.value?-1*i:e.value>t.value?i:0})),t&&(l=t<Object.keys(e).length,e=e.slice(0,t)),{items:e,hasMore:l}},n._generateItem=function(e,i){let l,o=n.isValueSelected(e),a=n.getOptionByValue(e),s=t("<li/>",{"data-value":e,class:a.length?a.attr("class"):""});if(a.length){const e=a.data("template"),t=a.data("count");i=e||i,t&&(i+=t)}if(l=t("<a/>",{href:a.length?a.data("filter_url"):"#",html:i,"data-title":a.length?a.data("title"):""}),n.$origialSelect.prop("multiple")){const i=t("<input/>",{type:"checkbox",value:e}),n=t("<label>");i.prop("checked",o),n.prepend(i).append(l),s.append(n).addClass("checkbox")}else s.append(l);return o?s.addClass("active"):s.removeClass("active"),s},n._populateItems=function(e){let i,l=n.$_search?.length?n.$_search.val():"",o=n.options.paginate?n.options.perPage:0;i=(e=e?parseInt(e):1)*o,n.getMatchingElements(l,i).then((function(i){let l=i.items,o=[],a=!1;if(n._emptyItems(),n._hideLoadMore(),l.length){for(const e of l)""===e.value?o.unshift(n._generateItem(e.value,e.label)):o.push(n._generateItem(e.value,e.label));n.currentPage=e,a=i.hasMore}else o.push(t("<li/>",{text:n.options.labels.noItemsFound})),n.currentPage=1;n.$_items.append(o),t(document).trigger("yith_wcan_dropdown_updated"),a&&n._showLoadMore()}))},n.loadNextPage=function(){const e=n.currentPage+1;n._populateItems(e)},n._selectItem=function(e){return n._changeItemStatus(e,!0)},n._deselectItem=function(e){return n._changeItemStatus(e,!1)},n._changeItemStatus=function(e,t){const i=n.$origialSelect.find(`option[value="${e}"]`);return!!i.length&&(i.prop("selected",t),n.closeDropdown(),n.updateLabel(),n.$origialSelect.trigger("change",[!0]),!0)},n._emptyItems=function(){n.$_items.html("")},n._showLoadMore=function(){n.$_showMore.show()},n._hideLoadMore=function(){n.$_showMore.hide()},n.getLabel=function(){return n.hasSelectedValues()?n.getSelectedLabels().join(", "):n.options.labels.emptyLabel},n.updateLabel=function(){const e=n.getLabel();n.$_label.html(e)},n.getOptions=function(){return n.$origialSelect.find("option")},n.hasSelectedValues=function(){return n.getSelectedOptions().length},n.isValueSelected=function(e){return-1!==n.getSelectedValues().indexOf(e)},n.getSelectedOptions=function(){return n.$origialSelect.find("option").filter(":selected")},n.getOptionByValue=function(e){return n.$origialSelect.find(`option[value="${e}"]`)},n.getSelectedLabels=function(){const e=[];return n.getSelectedOptions().each((function(){let i=t(this),n=i.data("template");n=n||i.html().replace(/\([0-9]*\)/,""),e.push(n)})),e},n.getSelectedValues=function(){const e=[];return n.getSelectedOptions().each((function(){e.push(t(this).val())})),e},n.destroy=function(){},n._init(),n}jQuery((function(e){e(document).on("yith_wcan_init_shortcodes yith_plugin_fw_gutenberg_success_do_shortcode",(function(){e(".yith-wcan-filters").not(".enhanced").each((function(){new YITH_WCAN_Preset(e(this),e)})),e(".yith-wcan-active-filters").not(".enhanced").each((function(){new YITH_WCAN_Filter_Labels(e(this),e)})),e(".yith-wcan-reset-filters").not(".enhanced").each((function(){new YITH_WCAN_Reset_Button(e(this),e)})),e(".yith-wcan-filters-opener").not(".enhanced").each((function(){new YITH_WCAN_Modal_Opener(e(this),e)}))})).trigger("yith_wcan_init_shortcodes"),globalThis.product_filter=new YITH_WCAN_Filter(e)}));