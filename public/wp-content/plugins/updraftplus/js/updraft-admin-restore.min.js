jQuery(document).ready(function(e){function r(r,t){var s=new XMLHttpRequest,a="action="+t+"&updraftplus_ajax_restore=do_ajax_restore&job_id="+r,o=0,u=!0,n=e("#updraftplus_ajax_restore_debug").length;s.open("POST",ajaxurl,!0),s.onprogress=function(r){if(r.currentTarget.status>=200&&r.currentTarget.status<300){if(-1!==r.currentTarget.responseText.indexOf("<html"))return u&&(u=!1,alert("UpdraftPlus "+updraftlion.ajax_restore_invalid_response)),e("#updraftplus_ajax_restore_output").append("UpdraftPlus "+updraftlion.ajax_restore_invalid_response),console.log("UpdraftPlus restore error: HTML detected in response could be a copy of the WordPress front page caused by mod_security"),void console.log(r.currentTarget.responseText);if(o==r.currentTarget.responseText.length)return;var t=r.currentTarget.responseText.substr(o);o=r.currentTarget.responseText.length;for(var s=0,a=0;s<t.length;){var p=t.substr(s,7);if("RINFO:{"==p){e("#updraftplus_ajax_restore_output").append(t.substring(a,s));var l=ud_parse_json(t.substr(s),!0);1==n&&console.log(l),a=s+l.json_last_pos-l.json_start_pos+6,s=a}else s++}e("#updraftplus_ajax_restore_output").append(t.substr(a))}else e("#updraftplus_ajax_restore_output").append("UpdraftPlus restore error: "+r.currentTarget.status+" "+r.currentTarget.statusText),console.log("UpdraftPlus restore error: "+r.currentTarget.status+" "+r.currentTarget.statusText),console.log(r.currentTarget)},s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(a)}var t=e("#updraftplus_ajax_restore_job_id").val(),s=e("#updraftplus_ajax_restore_action").val();r(t,s)});