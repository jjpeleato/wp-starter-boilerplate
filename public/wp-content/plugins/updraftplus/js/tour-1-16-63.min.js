!function(a){a(function(){var t,e,n,o;function u(){n.canceled=!0;var t={current_step:this.getCurrentStep().id};"function"==typeof updraft_send_command?updraft_send_command("set_tour_status",t,function(t){console.log("Successfully deactivated tour")},{alert_on_error:!1}):jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"updraft_ajax",subaction:"set_tour_status",nonce:updraftplus_tour_i18n.nonce,current_step:this.getCurrentStep().id}})}a(".updraftplus-welcome .close").on("click",function(t){t.preventDefault(),a(this).closest(".updraftplus-welcome").remove()}),window.Shepherd&&(t="button button-primary",e=window.updraft_plugins_page_tour=new Shepherd.Tour,(n=window.updraft_main_tour=new Shepherd.Tour).options.defaults=e.options.defaults={classes:"shepherd-theme-arrows-plain-buttons shepherd-main-tour",showCancelLink:!0,scrollTo:!1,tetherOptions:{constraints:[{to:"scrollParent",attachment:"together",pin:!1}]}},e.addStep("intro",{title:updraftplus_tour_i18n.plugins_page.title,text:updraftplus_tour_i18n.plugins_page.text,attachTo:".js-updraftplus-settings top",buttons:[{classes:t,text:updraftplus_tour_i18n.plugins_page.button.text,action:function(){window.location=updraftplus_tour_i18n.plugins_page.button.url}}],tetherOptions:{constraints:[{to:"scrollParent",attachment:"together",pin:!1}],offset:"20px 0"},when:{show:function(){a("body").addClass("highlight-udp");var t=a(this.el);a("body, html").animate({scrollTop:t.offset().top-50},500,function(){window.scrollTo(0,t.offset().top-50)})},hide:function(){a("body").removeClass("highlight-udp")}}}),n.addStep("backup_now",{title:updraftplus_tour_i18n.backup_now.title,text:updraftplus_tour_i18n.backup_now.text,attachTo:"#updraft-backupnow-button bottom",buttons:[{classes:"udp-tour-end",text:updraftplus_tour_i18n.end_tour,action:n.cancel},{classes:t,text:updraftplus_tour_i18n.next,action:function(){a("#updraft-navtab-settings").trigger("click")}}]}),n.addStep("backup_options",{title:updraftplus_tour_i18n.backup_options.title,text:updraftplus_tour_i18n.backup_options.text,classes:"shepherd-theme-arrows-plain-buttons shepherd-main-tour super-index",attachTo:"#backupnow_includedb left",tetherOptions:{offset:"-15px 25px"},buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){a("#updraft-backupnow-modal").dialog("close")}},{classes:t,text:updraftplus_tour_i18n.next,action:n.next}]}),n.addStep("backup_now_btn",{title:updraftplus_tour_i18n.backup_now_btn.title,text:updraftplus_tour_i18n.backup_now_btn.text,classes:"shepherd-theme-arrows-plain-buttons shepherd-main-tour super-index",attachTo:".js-tour-backup-now-button top",buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.back()}},{classes:t,text:updraftplus_tour_i18n.backup_now_btn.btn_text,action:function(){a("#updraft-backupnow-modal").dialog("close"),a("#updraft-navtab-settings").trigger("click")}}]}),n.addStep("backup_now_btn_success",{title:updraftplus_tour_i18n.backup_now_btn_success.title,text:updraftplus_tour_i18n.backup_now_btn_success.text,attachTo:"#updraft_activejobs_table top",buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){a("#updraft-backupnow-button").trigger("click"),n.show("backup_now_btn")}},{classes:t,text:updraftplus_tour_i18n.backup_now_btn_success.btn_text,action:function(){a("#updraft-navtab-settings").trigger("click")}}],when:{show:function(){setTimeout(function(){a(window).trigger("scroll")})}}}),n.addStep("settings_timing",{title:updraftplus_tour_i18n.settings_timing.title,text:updraftplus_tour_i18n.settings_timing.text,attachTo:".retain-files right",buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){a("#updraft-navtab-backups").trigger("click")}},{classes:t,text:updraftplus_tour_i18n.next,action:n.next}],tetherOptions:a.extend({},n.options.defaults.tetherOptions,{offset:"-33px -15px"}),when:{show:function(){o()}}}),n.addStep("settings_remote_storage",{title:updraftplus_tour_i18n.settings_remote_storage.title,text:updraftplus_tour_i18n.settings_remote_storage.text,attachTo:{element:"label[for=updraft_servicecheckbox_updraftvault]",on:"top"},buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.back()}},{classes:t,text:updraftplus_tour_i18n.next,action:function(){a("#updraft_servicecheckbox_updraftvault").is(":checked")?n.show("vault_selected"):n.next()}}],when:{show:function(t){a("label[for=updraft_servicecheckbox_updraftvault]").addClass("emphasize"),o()},hide:function(t){a("label[for=updraft_servicecheckbox_updraftvault]").removeClass("emphasize")}}}),n.addStep("settings_more",{title:updraftplus_tour_i18n.settings_more.title,text:updraftplus_tour_i18n.settings_more.text,attachTo:".js-tour-settings-more top",scrollTo:!1,tetherOptions:{},buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.back()}},{classes:t,text:updraftplus_tour_i18n.next,action:n.next}],when:{show:function(){o()}}}),n.addStep("settings_save",{title:updraftplus_tour_i18n.settings_save.title,text:updraftplus_tour_i18n.settings_save.text,attachTo:"#updraftplus-settings-save top",scrollTo:!1,buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.back()}},{classes:t,text:updraftplus_tour_i18n.next,action:function(){a("#updraftcentral_cloud_connect_container").length?n.show("updraft_central"):a("#updraft-navtab-addons").trigger("click")}}],when:{show:function(){o()}}}),n.addStep("updraft_central",{title:updraftplus_tour_i18n.updraft_central.title,text:updraftplus_tour_i18n.updraft_central.text,attachTo:"#updraftcentral_cloud_connect_container  top",scrollTo:!1,buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.back()}},{classes:t,text:updraftplus_tour_i18n.next,action:function(){a("#updraft-navtab-addons").trigger("click")}}],when:{show:function(){o()}}}),n.addStep("premium",{title:updraftplus_tour_i18n.premium.title,text:updraftplus_tour_i18n.premium.text,attachTo:updraftplus_tour_i18n.premium.attach_to,scrollTo:!1,buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.going_somewhere=!0,a("#updraft-navtab-settings").trigger("click"),a("#updraftcentral_cloud_connect_container").length?n.show("updraft_central"):n.show("settings_save"),o()}},{classes:t,text:updraftplus_tour_i18n.premium.button,action:n.cancel}],when:{show:function(){window.scroll(0,0)}}}),n.addStep("vault_selected",{title:updraftplus_tour_i18n.vault_selected.title,text:updraftplus_tour_i18n.vault_selected.text,attachTo:"#updraftvault_settings_cell top",scrollTo:!1,buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.show("settings_remote_storage")}},{classes:t,text:updraftplus_tour_i18n.next,action:function(){n.show("settings_more")}}],when:{show:function(t){o()}}}),n.addStep("settings_saved",{title:updraftplus_tour_i18n.settings_saved.title,text:updraftplus_tour_i18n.settings_saved.text,attachTo:"#updraftplus-settings-save top",scrollTo:!1,buttons:[{classes:"udp-tour-back",text:updraftplus_tour_i18n.back,action:function(){n.show("settings_more")}},{classes:t,text:updraftplus_tour_i18n.next,action:function(){a("#updraftcentral_cloud_connect_container").length?n.show("updraft_central"):a("#updraft-navtab-addons").trigger("click")}}],when:{show:function(){o()}}}),n.steps.forEach(function(t){t.once("show",function(){a(this.el).find("header .shepherd-cancel-link").attr("data-btntext",updraftplus_tour_i18n.close),a(this.el).find(".js--go-to-settings").on("click",function(t){t.preventDefault(),a("#updraft-navtab-settings").trigger("click")})})}),n.on("cancel",u),e.on("cancel",u),o=function(t){n.going_somewhere=!1,t=t||n.getCurrentStep();var e=a(t.el);a(t.tether.target);a("body, html").animate({scrollTop:e.offset().top-50},500,function(){window.scrollTo(0,e.offset().top-50)})},a("#updraft-backupnow-button").length&&(a("#updraft-backupnow-button").on("click",function(t){n.canceled||n.show("backup_options")}),a("#updraft-navtab-backups").on("click",function(t){n.canceled||n.show("backup_now")}),a(document).on("click","label[for=updraft_servicecheckbox_updraftvault]",function(t){n.canceled||a("#updraft_servicecheckbox_updraftvault").is(":checked")||setTimeout(function(){n.show("vault_selected")},200)}),a("#updraft-backupnow-modal").on("dialogclose",function(t,e){n.canceled||n.show("backup_now")}),a(".js-tour-backup-now-button").on("click",function(t){n.canceled||n.show("backup_now_btn_success")}),a("#updraft-navtab-settings").on("click",function(t){n.canceled||n.going_somewhere||n.show("settings_timing")}),a("#updraft-navtab-addons").on("click",function(t){n.canceled||n.show("premium")}),a("#updraft-navtab-migrate, #updraft-navtab-expert").on("click",function(t){n.canceled||n.hide()}),n.start(),(updraftplus_tour_i18n.show_tab_on_load?a(updraftplus_tour_i18n.show_tab_on_load):a("#updraft-navtab-backups")).trigger("click")),a(".js-updraftplus-settings").length&&e.start())})}(jQuery);